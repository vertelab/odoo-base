<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
  <record id="view_partner_form" model="ir.ui.view">

    <field name="name">res.partner.form.inherit.view_360</field>

    <field name="model">res.partner</field> 
    <field name="inherit_id" ref="base.view_partner_form" />
    <field name="arch" type="xml"> 

     <!-- TODO: 
     
      vid sökning heter administrative officer (user_id) fortfarande säljare, kanske ska ändra genom 
      en translation fil eller på liknande sätt så att alla instanser av säljare blir till handläggare
      alternativt byta ut fältet helt.

      borde ändra implementering, administrative officer bör vara eget fält, medan user_id är gömd, men används för annat.
      -->   
      <field name="function" position="after"> 
        <field name="work_phone"/>
      </field>
      <xpath expr="//group[@name='sale']/field[@name='user_id']" position="attributes">
        <attribute name="string">Administrative officer</attribute>
      </xpath>
      <field name="type" position="before">   
       <!-- behåll ifall det behövs i framtiden -->
        <!-- <span>
        <label for="org_or_social_sec_nr" string="Organization number" attrs="{'invisible':[('is_company', '=', False)]}"/>
        <label for="org_or_social_sec_nr" string="Social security number" attrs="{'invisible':[('is_company', '=', True)]}"/>
        </span> -->
        <field name="company_registry" /> 
        <field name="cfar" attrs="{'invisible':[('is_company', '=', False)]}"/>
      </field>
    
      <field name="barcode" position="after">
        <field name="office" options="{'no_create_edit': True}" domain="[('type', '=', 'af office')]"/>
        <field name="my_office_code" />
        <field name="is_jobseeker" />
        <field name="is_independent_partner" />
        <field name="is_government" />
        <field name="is_employer" />
        <field name="type"/>
      </field>
      <!-- endast för om is_customer är true-->
      <field name="vat" position="after">
        <field name="customer_id" attrs="{'invisible':[('customer', '=', False)]}"/> 
        <field name="office_code" attrs="{'invisible':[('type', '!=', 'af office')]}"/>
      </field>
      <field name="vat" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      <field name="barcode" position="attributes"> 
        <attribute name="invisible">1</attribute>
      </field>
       <xpath expr="//page[@name='internal_notes']" position="after" >
                <page string="Jobseeker info" attrs="{'invisible':[('customer', '=', False)]}">
                    <group>
                    <group>
                      <field name="jobseeker_category" /> 
                      <field name="customer_since" /> 
                      <field name="jobseeker_work" attrs="{'invisible':[('is_company', '=', True)]}"/> 
                    </group>   
                    <group>
                      <field name="deactualization_date" />    
                      <field name="deactualization_reason" />    
                      <field name="foreign_country_of_work" /> 
                      <field name="deactualization_message" />   
                    </group>   
                    </group>
                </page>
            </xpath>
    </field>
  </record>


 <!-- endast när account är installerad
   <record id="view_partner_property_form_employee360" model="ir.ui.view"> 
    <field name="name">res.partner.property.form.inherit.employee360</field> 
    <field name="model">res.partner</field> 
    <field name="inherit_id" ref="account.view_partner_property_form" /> 
    <field name="arch" type="xml"> 
       <xpath expr="//group[@name='fiscal_information']" position="attributes">
         <attribute name="invisible">1</attribute>
      </xpath> 

        <xpath expr="//page[@name='accounting']" position="attributes">
         <attribute name="invisible">1</attribute>
      </xpath> 
    </field>
  </record>
-->
  <record id="view_partner_tree" model="ir.ui.view"> 
    <field name="name">res.partner.view.tree.inherit.view_360</field>      
    <field name="model">res.partner</field> 
    <field name="inherit_id" ref="base.view_partner_tree" /> 
    <field name="arch" type="xml"> 
      <xpath expr="/tree" position="inside">
        <field name="customer_id"/>
      </xpath>
    </field>
  </record>

  <record id="view_partner_select_employee360" model="ir.ui.view"> 
    <field name="name">res.partner.view.select.inherit.view_360</field>           
    <field name="model">res.partner</field> 
    <field name="inherit_id" ref="base.view_res_partner_filter" /> 
    <field name="arch" type="xml"> 
      <xpath expr="//field[@name='user_id']" position="after"> 
        <field name="customer_id" />         <!-- filter_domain="[('customer','=',True), ('parent_id', '=', False)]" --> <!-- kommenterad för att jag inte har någon customer, behöver testas -->
        <filter string="Job seekers" name="is_jobseeker" domain="[('is_jobseeker','=',True)]"/> 
        <filter string="Employers" name="is_employer" domain="[('is_employer','=',True)]"/>
        <filter string="Government body" name="is_government" domain="[('is_government','=',True)]"/>
        <filter string="Independent partners" name="is_independent_partner" domain="[('is_independent_partner','=',True)]"/>
      </xpath>
    </field>
  </record>
  

    <record id="view_partner_form_education" model="ir.ui.view"> 
        <field name="name">res.partner.eduacation.form</field> 
        <field name="model">res.partner</field> 
        <field name="inherit_id" ref="base.view_partner_form" /> 
        <field name="arch" type="xml"> 
            <xpath expr="//page[@name='internal_notes']" position="after">
                <page name="education" string="Education" > 
                    <group>
                        <field name="sun_id" options="{'no_create_edit': True}"/> 
                        <field name="education_level"/>
                        <field name="foreign_education"/>
                        <field name="foreign_education_approved"/>
                        <field name="has_drivers_license"/>
                        <field name="drivers_license_id" options="{'no_create_edit': True}"/> 
                        <field name="has_car"/>
                    </group>
                </page>
            </xpath>
        </field>
     </record>

       <!-- <record id="view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form.inherit.drivers_license</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <xpath expr="//page[@name='education']/group" position="inside">
             
            </xpath> 
        </field>
    </record> -->

  <record id="view_partner_jobseeker_form" model="ir.ui.view">
    <field name="name">res.partner.form.jobseeker</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml"> 
      <form string="Jobseeker">
      <sheet>
      <div class="oe_button_box" name="button_box">
        <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
          <field name="active" widget="boolean_button" options="{&quot;terminology&quot;: &quot;archive&quot;}"/>
        </button>
      </div>
      <div class="oe_title">
        <h1>
          <field name="name" default_focus="1" placeholder="Name" attrs="{'required' : [('type', '=', 'contact')]}"/>
        </h1>
      </div>
      <group>
        <group string="Personal Information">
          <field name="parent_id" attrs="{'invisible' : True}"/>
          <field name="type" attrs="{'invisible' : True}"/>
          <label for="company_registry" string="Social security number"/>
          <field name="company_registry" nolabel="1"/>
          <field name="age"/>
          <field name="customer_id"/> 
          
          <!-- folkbokföringsadress, alternativt göra en res partner typ-->

          <field name="state_id" class="o_address_state" placeholder="State"/>
          <label for="street" string="Address"/>
          <div class="o_address_format"> 
              <field name="street" placeholder="Street..." class="o_address_street" />
              <field name="zip" placeholder="ZIP" class="o_address_zip"/>
              <field name="city" placeholder="City" class="o_address_city"/>
          </div>

          <field name="street2" placeholder="Street 2..." class="o_address_street" attrs="{'invisible': True}"/>
          <field name="country_id" placeholder="Country" class="o_address_country" attrs="{'invisible': True}"/>


          <label for="postal_address_street" string="Postal address"/>
          <div class="o_address_format"> 
              <field name="postal_address_street" placeholder="Street..." class="o_address_street" />
              <field name="postal_address_zip" placeholder="ZIP" class="o_address_zip"/>
              <field name="postal_address_city" placeholder="City" class="o_address_city"/>
          </div>
          <field name="postal_address_id" domain="[('type', '=', 'postal address')]" attrs="{'invisible': True}"/>
          
          <field name="phone"/>
          <field name="mobile"/>
          <field name="email"/>
        </group>
        <group string="Employment service information">
          <field name="registered_through"/>
          <field name="jobseeker_category"/>
          <field name="customer_since"/>
          <field name="office" options="{'no_create_edit': True}" domain="[('type', '=', 'af office')]"/>
          <field name="share_info_with_employers"/> 
          <field name="sms_reminders"/>
        </group>
      </group>
      <notebook>
        <page name="apply_for_jobs" string="Apply for jobs">
                  
        </page>
      </notebook>
      </sheet>
      </form>

    </field>
  </record> 


  <record model="ir.ui.view" id="view_jobseeker_kanban">
            <field name="name">res.partner.jobseeker.kanban</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                  <field name="name"/>
                  <field name="city"/>
                  <field name="email"/>
                  <field name="office"/>
                    <templates>
                      <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                </strong>
                                <div class="o_kanban_tags_section">
                                    <ul>
                                        <li>  <field name="city"/> </li>
                                        <li>  <field name="email"/> </li> 
                                         <li> <field name="office"/> </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
        </record>

    <record id="action_jobseekers" model="ir.actions.act_window">
        <field name="name">Jobseekers Action</field>
        <!-- <field name="type">ir.actions.act_window</field> -->
        <field name="res_model">res.partner</field>
        <!-- <field name="view_type">form</field> -->
        <field name="view_mode">kanban,tree,form,activity</field>
        <field name="search_view_id" ref="base.view_res_partner_filter"/>
        <field name="help" type="html">
        <field name="view_id" ref="view_jobseeker_kanban"/>
          <p class="o_view_nocontent_smiling_face">
            Create a jobseeker in your address book
          </p>
        </field>
        <field name="domain" eval="[('is_jobseeker', '=', True)]"/>
    </record>

   <record id="action_jobseeker_form_view" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_partner_jobseeker_form"/>
            <field name="act_window_id" ref="action_jobseekers"/>
        </record>
 <record id="action_jobseeker_kanban_view" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_jobseeker_kanban"/>
            <field name="act_window_id" ref="action_jobseekers"/>
        </record>
      

    <menuitem id="res_partner_jobseekers_menu"
        name="Jobseekers"
        action="action_jobseekers"
        sequence="4"/>

        <menuitem id="res_partner_jobseekers_config_menu" parent="res_partner_jobseekers_menu" name="Configuration" sequence="0" /> <!--base group no one-->

        <menuitem id="menu_ssyk_config" parent="res_partner_jobseekers_config_menu" action="res_ssyk.action_ssyk_form" sequence="2" />
        <menuitem id="menu_sun_config" parent="res_partner_jobseekers_config_menu" action="res_sun.action_sun_form" sequence="3" />
        <menuitem id="menu_sni_config" parent="res_partner_jobseekers_config_menu" action="res_sni.action_sni_form" sequence="1" />
        <menuitem id="menu_drivers_license_config" parent="res_partner_jobseekers_config_menu" action="res_drivers_license.action_drivers_license_form" sequence="4" />


 <record id="view_partner_form_education1" model="ir.ui.view"> 
        <field name="name">res.partner.eduacation.form1</field> 
        <field name="model">res.partner</field> 
        <field name="inherit_id" ref="view_partner_jobseeker_form" /> 
        <field name="arch" type="xml"> 
            <xpath expr="//page[@name='apply_for_jobs']" position="inside">
                <page name="education" string="Education" > 
                    <group>
                        <field name="sun_id" options="{'no_create_edit': True}"/> 
                        <field name="education_level"/>
                        <field name="foreign_education"/>
                        <field name="foreign_education_approved"/>
                        <field name="has_drivers_license"/>
                        <field name="drivers_license_id" options="{'no_create_edit': True}"/> 
                        <field name="has_car"/>
                    </group>
                </page>
            </xpath>
        </field>
     </record>

      <record id="view_partner_employer_form" model="ir.ui.view">
    <field name="name">res.partner.form.employer</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml"> 
      <form string="employer">
      <sheet>
      <div class="oe_button_box" name="button_box">
        <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
          <field name="active" widget="boolean_button" options="{&quot;terminology&quot;: &quot;archive&quot;}"/>
        </button>
      </div>
      <div class="oe_title">
        <h1>
          <field name="name" default_focus="1" placeholder="Name" attrs="{'required' : [('type', '=', 'contact')]}"/>
        </h1>
      </div>
      <group>
        <group string="Organization info">
          <field name="parent_id" attrs="{'invisible' : True}"/>
          <field name="type" attrs="{'invisible' : True}"/>
          <field name="lang" attrs="{'invisible' : True}"/>
          <field name="supplier" attrs="{'invisible' : True}"/>
          <field name="customer" attrs="{'invisible' : True}"/>
          <field name="company_registry"/>
          <field name="cfar"/>
          <field name="customer_id"/> 
          
          <field name="state_id" class="o_address_state" placeholder="State"/>
          <label for="street" string="Address"/>
          <div class="o_address_format"> 
              <field name="street" placeholder="Street..." class="o_address_street"/>
              <field name="city" placeholder="City" class="o_address_city"/>
              <field name="zip" placeholder="ZIP" class="o_address_zip"/>
          </div>

          <field name="street2" placeholder="Street 2..." class="o_address_street" attrs="{'invisible': True}"/>
          <field name="country_id" placeholder="Country" class="o_address_country" attrs="{'invisible': True}"/>
         
          <field name="phone"/>
          <field name="mobile"/>
          <field name="email"/>
          <field name="website"/>
        </group>
        <group string="Employment service information">
          <field name="registered_through"/>
          <field name="customer_since"/>
          <field name="sni_ids" widget="many2many_tags"/>
          <field name="employer_class"/>
          <label for="user_id" string="Administrative officer"/>
          <field name="user_id" nolabel="1"/>
          <field name="office" options="{'no_create_edit': True}" domain="[('type', '=', 'af office')]"/>
        </group>
      </group>
      <notebook>
        <page name="contacts_addresses" string="Contacts &amp; Addresses" autofocus="autofocus">
            <field name="child_ids" mode="kanban" context="{'default_parent_id': active_id, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_supplier': supplier, 'default_customer': customer, 'default_lang': lang, 'default_user_id': user_id}">
                <kanban>
                    <field name="id"/>
                    <field name="color"/>
                    <field name="name"/>
                    <field name="title"/>
                    <field name="type"/>
                    <field name="email"/>
                    <field name="parent_id"/>
                    <field name="is_company"/>
                    <field name="function"/>
                    <field name="phone"/>
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="zip"/>
                    <field name="city"/>
                    <field name="country_id"/>
                    <field name="mobile"/>
                    <field name="state_id"/>
                    <field name="image_small"/>
                    <field name="lang"/>
                    <!-- fields in form x2many view to diminish requests -->
                    <field name="comment"/>
                    <field name="customer"/>
                    <field name="display_name"/>
                    <field name="supplier"/>
                    <templates>
                        <t t-name="kanban-box">
                            <t t-set="color" t-value="kanban_color(record.color.raw_value)"/>
                            <div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '') + ' oe_kanban_global_click'">
                                <div class="o_kanban_image">
                                    <img alt="" t-if="record.image_small.raw_value" t-att-src="kanban_image('res.partner', 'image_small', record.id.raw_value)"/>
                                    <t t-if="!record.image_small.raw_value">
                                        <img alt="Delivery" t-if="record.type.raw_value === 'delivery'" t-att-src="_s + &quot;/base/static/img/truck.png&quot;"/>
                                        <img alt="Invoice" t-if="record.type.raw_value === 'invoice'" t-att-src="_s + &quot;/base/static/img/money.png&quot;"/>
                                        <t t-if="record.type.raw_value !== 'invoice' &amp;&amp; record.type.raw_value !== 'delivery'">
                                            <img alt="Logo" t-if="record.is_company.raw_value === true" t-att-src="_s + &quot;/base/static/img/company_image.png&quot;"/>
                                            <img alt="Avatar" t-if="record.is_company.raw_value === false" t-att-src="_s + &quot;/base/static/img/avatar.png&quot;"/>
                                        </t>
                                    </t>
                                </div>
                                <div class="oe_kanban_details">
                                    <field name="name"/>
                                    <div t-if="record.function.raw_value"><field name="function"/></div>
                                    <div t-if="record.email.raw_value"><field name="email" widget="email"/></div>
                                    <div t-if="record.type.raw_value != 'contact'">
                                        <div>
                                            <field name="zip"/>
                                            <field name="city"/>
                                        </div>
                                        <field t-if="record.state_id.raw_value" name="state_id"/>
                                        <field name="country_id"/>
                                    </div>
                                    <div t-if="record.phone.raw_value">Phone: <field name="phone"/></div>
                                    <div t-if="record.mobile.raw_value">Mobile: <field name="mobile"/></div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
                <form string="Contact / Address">
                    <sheet>
                        <!-- parent_id and type fields needed in attrs in base_address_city module which overwrites
                        _fields_view_get() of partner. It would be better to put those fields there but the web client
                        dosen't support when a field is displayed several times in the same view.-->
                        <field name="type" required="1" widget="radio" options="{'horizontal': true}"/>
                        <field name="parent_id" invisible="1"/>
                        <hr/>
                        <group>
                            <group attrs="{'invisible': [('type','=', 'contact')]}">
                                <label for="street" string="Address"/>
                                <div>
                                    <div class="o_address_format" name="div_address">
                                        <field name="street" placeholder="Street..." class="o_address_street"/>
                                        <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                        <field name="city" placeholder="City" class="o_address_city"/>
                                        <field name="state_id" class="o_address_state" placeholder="State" options="{&quot;no_open&quot;: True}" context="{'country_id': country_id, 'zip': zip}"/>
                                        <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                        <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                                    </div>
                                </div>
                            </group>
                            <group>
                                <field name="name" string="Contact Name" attrs="{'required' : [('type', '=', 'contact')]}"/>
                                <field name="title" placeholder="e.g. Mr." attrs="{'invisible': [('type','!=', 'contact')]}"/>
                                <field name="function" placeholder="e.g. Sales Director" attrs="{'invisible': [('type','!=', 'contact')]}"/>
                                <field name="email"/>
                                <field name="phone" widget="phone"/>
                                <field name="mobile" widget="phone"/>
                                <field name="comment" placeholder="internal note..."/>
                            </group>
                        </group>
                        <field name="supplier" invisible="True"/>
                        <field name="customer" invisible="True"/>
                        <field name="lang" invisible="True"/>
                        <field name="image" invisible="True"/>
                        <field name="user_id" invisible="True"/>
                    </sheet>
                </form>
            </field>
        </page>
      </notebook>
      </sheet>
      </form>

    </field>
  </record> 


  <record model="ir.ui.view" id="view_employer_kanban">
            <field name="name">res.partner.employer.kanban</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                  <field name="name"/>
                  <field name="city"/>
                  <field name="email"/>
                  <field name="office"/>
                    <templates>
                      <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                </strong>
                                <div class="o_kanban_tags_section">
                                    <ul>
                                        <li>  <field name="city"/> </li>
                                        <li>  <field name="email"/> </li> 
                                         <li> <field name="office"/> </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
        </record>

         <!-- <record id="action_employers" model="ir.actions.act_window">
    <field name="name">Employers Action</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">kanban,tree,form,activity</field>
    <field name="search_view_id" ref="base.view_res_partner_filter"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Create an employer in your address book
      </p>
    </field>
    <field name="domain" eval="[('is_employer', '=', True)]"/>
  </record>

  <menuitem id="res_partner_employers_menu"
        name="Employers"
        action="action_employers"
        sequence="4"/> -->

    <record id="action_employers" model="ir.actions.act_window">
        <field name="name">Employers Action</field>
        <!-- <field name="type">ir.actions.act_window</field> -->
        <field name="res_model">res.partner</field>
        <!-- <field name="view_type">form</field> -->
        <field name="view_mode">kanban,tree,form,activity</field>
        <field name="search_view_id" ref="base.view_res_partner_filter"/>
        <field name="help" type="html">
        <field name="view_id" ref="view_employer_kanban"/>
          <p class="o_view_nocontent_smiling_face">
            Create a employer in your address book
          </p>
        </field>
        <field name="domain" eval="[('is_employer', '=', True)]"/>
    </record>

   <record id="action_employer_form_view" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_partner_employer_form"/>
            <field name="act_window_id" ref="action_employers"/>
        </record>
 <record id="action_employer_kanban_view" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_employer_kanban"/>
            <field name="act_window_id" ref="action_employers"/>
        </record>
      

    <menuitem id="res_partner_employers_menu"
        name="Employers"
        action="action_employers"
        sequence="3"/>

        <menuitem id="res_partner_employers_config_menu" parent="res_partner_employers_menu" name="Configuration" sequence="0" /> <!--base group no one-->

        <menuitem id="menu_ssyk_config" parent="res_partner_employers_config_menu" action="res_ssyk.action_ssyk_form" sequence="2" />
        <menuitem id="menu_sni_config" parent="res_partner_employers_config_menu" action="res_sni.action_sni_form" sequence="1" />

        



</odoo>
