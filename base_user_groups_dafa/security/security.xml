<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- ##################################### -->
    <!-- Manage Users, Employees, Contacts Organization wide -->
    <!-- Hantera Användare och Org-uppgifter (Organisationsnivå) -->
    <!-- ##################################### -->
    
    <record id="category_dafa_handle_org_info" model="ir.module.category">
        <field name="name">Handle Organization</field>
        <field name="description">Category for handling employee rights on organisational level.</field>
    </record>

    <!-- Superadmin (Read) -->
    <!-- Hantera Organisationsuppgifter (Läs) -->
    <record id="group_dafa_org_admin_read" model="res.groups">
        <field name="name">DAFA Org Admin (Read)</field>
        <field name="comment">Allows user to read information related to the organization and all its departments.</field>
        <field name="category_id" ref="category_dafa_handle_org_info"/>
        <field name="is_dafa" eval="True"/>
    </record>


    <!-- Superadmin (Write) -->
    <record id="group_dafa_org_admin_write" model="res.groups">
        <field name="name">DAFA Org Admin (Write)</field>
        <field name="comment">Allows user to read and alter information related to 
            the organization and all its departments.</field>
        <field name="category_id" ref="category_dafa_handle_org_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[
        (4, ref('group_dafa_org_admin_read')),(4, ref('sales_team.group_sale_manager')), 
        (4, ref('hr.group_hr_manager')), (4, ref('account.group_account_manager'))
        ]"/>
    </record>

    <!-- ############################################ -->
    <!-- Manage Users, Employees, Contacts Department level -->
    <!-- Hantera Deltagare och Ekonomi (Utförandeverksamhetsnivå) -->
    <!-- ############################################ -->
    <record id="category_dafa_handle_department_info" model="ir.module.category">
        <field name="name">Handle Department</field>
        <field name="description">Category for handling information and tasks related to department.</field>
    </record>

    <!-- Manage Employees -->
    <record id="group_dafa_employees_read" model="res.groups">
        <field name="name">DAFA Admin (Read)</field>    
        <field name="comment">Gives access to read employee related information and and processes.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
    </record>

    <record id="group_dafa_employees_write" model="res.groups">
        <field name="name">DAFA Admin (Write)</field>
        <field name="comment">Gives access to read and write to employee related information and and processes.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('group_dafa_employees_read')), (4, ref('hr.group_hr_user'))]"/>
    </record>

    <!-- Manage Participants -->
    <record id="group_dafa_participants_read" model="res.groups">
        <field name="name">DAFA Participants (Read)</field>
        <field name="comment">Gives access to read participant related information and processess.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('outplacement.group_outplacement_user_read'))]"/>
    </record>

    <record id="group_dafa_participants_write" model="res.groups">
        <field name="name">DAFA Participants (Write)</field>
        <field name="comment">Gives access to read and write participant related information and processess.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('outplacement.group_outplacement_user_write')), 
        (4, ref('group_dafa_participants_read')), (4, ref('project.group_project_user')), 
        (4, ref('sales_team.group_sale_salesman_all_leads'))]"/>
    </record>


    <!-- Manage Accounting -->
    <record id="group_dafa_admin_accounting_read" model="res.groups">
        <field name="name">DAFA Accounting (Read)</field>
        <field name="comment">Gives access to read information related to the accounting of the company 
            such as order-payments and invoices.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('group_dafa_participants_read'))]"/>
    </record>

    <record id="group_dafa_admin_accounting_write" model="res.groups">
        <field name="name">DAFA Accounting (Write)</field>
        <field name="comment">Gives access to read and write information related to the accounting of 
            the company such as order-payments and invoices.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('group_dafa_participants_write')), 
        (4, ref('group_dafa_admin_accounting_read')), (4, ref('account.group_account_invoice')), 
        (4, ref('account.group_account_manager'))]"/>
    </record>
    
    <!-- DAFA Support -->
    <record model="ir.module.category" id="module_category_af_support">
        <field name="name">DAFA Support</field>
        <field name="description">Allows you to perform technical support.</field>
        <field name="sequence">1</field>
    </record>

    <record id="1_line_support" model="res.groups">
        <field name="name">DAFA 1st Line</field>
        <field name="category_id" ref="module_category_af_support"/>
        <field name="implied_ids" eval="[(4, ref('base_user_groups_dafa.group_dafa_employees_read')), 
        (4, ref('base_user_groups_dafa.group_dafa_participants_read')), 
        (4, ref('base_user_groups_dafa.group_dafa_admin_accounting_read')), 
        (4, ref('base_user_groups_dafa.group_dafa_org_admin_read'))]"/>
        <field name="comment">DAFA READ-roles</field>
    </record>

    <record id="2_line_support" model="res.groups">
        <field name="name">DAFA 2nd Line</field>
        <field name="category_id" ref="module_category_af_support"/>
        <field name="implied_ids" eval="[(4, ref('1_line_support')), 
        (4, ref('base_user_groups_dafa.group_dafa_participants_write')), 
        (4, ref('base_user_groups_dafa.group_dafa_admin_accounting_write')), 
        (4, ref('base_user_groups_dafa.group_dafa_org_admin_write'))]"/>
        <field name="comment">DAFA Write-roles</field>
    </record>

    <record id="3_line_support" model="res.groups">
        <field name="name">DAFA 3rd Line</field>
        <field name="category_id" ref="module_category_af_support"/>
        <field name="implied_ids" eval="[(4, ref('2_line_support')), (4, ref('base.group_system'))]"/>
        <field name="comment">DAFA Write-roles and Odoo Admin</field>
    </record>

</odoo>
