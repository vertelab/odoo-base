<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- ##################################### -->
    <!-- Manage Users, Employees, Contacts Organization wide -->
    <!-- Hantera Användare och Org-uppgifter (Organisationsnivå) -->
    <!-- ##################################### -->
    
    <record id="category_dafa_handle_org_info" model="ir.module.category">
        <field name="name">Handle Organization</field>
        <field name="description">Category for handling employee rights on organisational level.</field>
    </record>

    <!-- Superadmin (Read) -->
    <!-- Hantera Organisationsuppgifter (Läs) -->
    <record id="group_dafa_org_admin_read" model="res.groups">
        <field name="name">DAFA Org Admin (Read)</field>
        <field name="comment"> Allows user to read the information related to
            the organization and all its departments.(The role inherits "Manage employees Read"and "Manage participants Read")</field>
        <field name="category_id" ref="category_dafa_handle_org_info"/>
        <field name="is_dafa" eval="True"/>
    </record>


    <!-- Superadmin (Write) -->
    <record id="group_dafa_org_admin_write" model="res.groups">
        <field name="name">DAFA Org Admin (Write)</field>
        <field name="comment"> Allows user to read and alter information related to 
            the organization and all its departments.(The role inherits "Manage employees Read/write"and "Manage participants Read")</field>
        <field name="category_id" ref="category_dafa_handle_org_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(6, 0, [
    ref('group_dafa_org_admin_read'),
    ref('hr.group_hr_manager'),
    ref('account.group_account_manager'),
    ref('outplacement.group_outplacement_user_read')])]"/>
    </record>

    <!-- ############################################ -->
    <!-- Manage Users, Employees, Contacts Department level -->
    <!-- Hantera Deltagare och Ekonomi (Utförandeverksamhetsnivå) -->
    <!-- ############################################ -->
    <record id="category_dafa_handle_department_info" model="ir.module.category">
        <field name="name">Handle Department</field>
        <field name="description">Category for handling information and tasks related to department.</field>
    </record>

    <!-- Manage Employees -->
    <record id="group_dafa_employees_read" model="res.groups">
        <field name="name">DAFA Admin (Read)</field>    
        <field name="comment">Gives access to read employee related information and and processes.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
    </record>

    <record id="group_dafa_employees_write" model="res.groups">
        <field name="name">DAFA Admin (Write)</field>
        <field name="comment">Gives access to read and write to employee related information and and processes.(The role inherits "Manage employees Read")</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(6, 0, [
        ref('group_dafa_employees_read'),
        ref('hr.group_hr_user'),
        ref('web_dashboard_dafa.group_my_dashboard_manager'),
        ref('outplacement.group_outplacement_user_write')])]"/>
    </record>

    <!-- Manage Participants -->
    <record id="group_dafa_participants_read" model="res.groups">
        <field name="name">DAFA Participants (Read)</field>
        <field name="comment">Gives access to read participant related information and processess.</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(6, 0, [
            ref('outplacement.group_outplacement_user_read'),
            ref('project.group_project_manager')])]"/>
    </record>

    <record id="group_dafa_participants_write" model="res.groups">
        <field name="name">DAFA Participants (Write)</field>
        <field name="comment">Gives access to read and write participant related information and processess.(The role Inherits "Manage Participant read")</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('outplacement.group_outplacement_user_write')), 
        (4, ref('group_dafa_participants_read')), (4, ref('project.group_project_user')), 
        (4, ref('sales_team.group_sale_salesman_all_leads'))]"/>
    </record>


    <!-- Manage Accounting -->
    <record id="group_dafa_admin_accounting_read" model="res.groups">
        <field name="name">DAFA Accounting (Read)</field>
        <field name="comment"> Gives access to read information related to the accounting of the company 
            such as order-payments and invoices.(The roll Inherits the groups "Manage Employee read" and "Manage Participant read")</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('group_dafa_participants_read')), eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
    </record>

    <record id="group_dafa_admin_accounting_write" model="res.groups">
        <field name="name">DAFA Accounting (Write)</field>
        <field name="comment"> Gives access to read and write information related to the accounting of 
            the company such as order-payments and invoices.(The role inherits "Manage employees Read/write" "Manage participants Read")</field>
        <field name="category_id" ref="category_dafa_handle_department_info"/>
        <field name="is_dafa" eval="True"/>
        <field name="implied_ids" eval="[(4, ref('group_dafa_participants_write')), 
        (4, ref('group_dafa_admin_accounting_read')), (4, ref('account.group_account_invoice')), 
        (4, ref('account.group_account_manager'))]"/>
    </record>
    
    <!-- DAFA Support -->
    <record model="ir.module.category" id="module_category_af_support">
        <field name="name">DAFA Support</field>
        <field name="description">Allows you to perform technical support.</field>
        <field name="sequence">1</field>
    </record>

    <record id="1_line_support" model="res.groups">
        <field name="name">DAFA 1st Line</field>
        <field name="category_id" ref="module_category_af_support"/>
        <field name="implied_ids" eval="[(4, ref('base_user_groups_dafa.group_dafa_employees_read')), 
        (4, ref('base_user_groups_dafa.group_dafa_participants_read')), 
        (4, ref('base_user_groups_dafa.group_dafa_admin_accounting_read')), 
        (4, ref('base_user_groups_dafa.group_dafa_org_admin_read'))]"/>
        <field name="comment">Inherits all DAFA READ-roles</field>
    </record>

    <record id="2_line_support" model="res.groups">
        <field name="name">DAFA 2nd Line</field>
        <field name="category_id" ref="module_category_af_support"/>
        <field name="implied_ids" eval="[(6, 0, [
    ref('1_line_support'), 
    ref('base_user_groups_dafa.group_dafa_participants_write'), 
    ref('base_user_groups_dafa.group_dafa_admin_accounting_write'), 
    ref('base_user_groups_dafa.group_dafa_org_admin_write'),
    ref('base.group_partner_manager')])]"/>
        <field name="comment">Inherits all DAFA Write-roles</field>
    </record>

    <record id="3_line_support" model="res.groups">
        <field name="name">DAFA 3rd Line</field>
        <field name="category_id" ref="module_category_af_support"/>
        <field name="implied_ids" eval="[(6, 0, [ref('2_line_support'), ref('base.group_system')])]"/>
        <field name="comment">Inherits all DAFA Write-roles and Odoo Admin role</field>
    </record>

    <record id="rule_dafa_partner_support" model="ir.rule">
        <field name="name">res.partner - DAFA Support</field>
        <field ref="base.model_res_partner" name="model_id"/>
        <field name="groups" eval="[(6, 0, [ref('2_line_support')])]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

     <record id="interpreter_accountant" model="res.groups">
        <field name="name">Interpreter Accountant</field>
    </record>

</odoo>
